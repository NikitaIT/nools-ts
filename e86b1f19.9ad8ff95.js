(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{104:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return b}));var a=n(2),i=n(6),c=(n(0),n(116)),r={id:"conflict-resolution",title:"Conflict Resolution"},o={unversionedId:"conflict-resolution",id:"version-4.0.0-alpha/conflict-resolution",isDocsHomePage:!1,title:"Conflict Resolution",description:"When declaring a flow it is defined with a default conflict resolution strategy. A conflict resolution strategy is used to determine which rule to activate when multiple rules are ready to be activated at the same time.",source:"@site/versioned_docs\\version-4.0.0-alpha\\conflict-resolution.md",permalink:"/nools-ts/docs/conflict-resolution",editUrl:"https://github.com/nikitait/nools-ts/edit/master/doc-website/versioned_docs/version-4.0.0-alpha/conflict-resolution.md",version:"4.0.0-alpha",sidebar:"version-4.0.0-alpha/docs",previous:{title:"Working with a session",permalink:"/nools-ts/docs/working-with-a-session"},next:{title:"Disposing",permalink:"/nools-ts/docs/disposing"}},l=[{value:"Resolution Strategies",id:"resolution-strategies",children:[]},{value:"Examples",id:"examples",children:[]},{value:"Overidding The Default Strategy",id:"overidding-the-default-strategy",children:[]}],s={rightToc:l};function b(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(c.b)("wrapper",Object(a.a)({},s,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"When declaring a flow it is defined with a default conflict resolution strategy. A conflict resolution strategy is used to determine which rule to activate when multiple rules are ready to be activated at the same time."),Object(c.b)("h2",{id:"resolution-strategies"},"Resolution Strategies"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"salience")," - sort activations on the specified ",Object(c.b)("a",Object(a.a)({parentName:"li"},{href:"#rule-salience"}),Object(c.b)("inlineCode",{parentName:"a"},"salience")),". (",Object(c.b)("strong",{parentName:"li"},"NOTE")," The default salience of a rule is 0)."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"activationRecency")," - sort activations on activation recency. This is a ",Object(c.b)("inlineCode",{parentName:"li"},"LIFO")," strategy the latest activation takes precedence."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"factRecency")," - sort activations based on ",Object(c.b)("inlineCode",{parentName:"li"},"fact")," recency. Each time a fact is ",Object(c.b)("inlineCode",{parentName:"li"},"asserted")," or ",Object(c.b)("inlineCode",{parentName:"li"},"modified")," its recency is incremented."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"bucketCounter")," - sort activations on the internal ",Object(c.b)("inlineCode",{parentName:"li"},"bucket")," counter. The bucket counter is incremented after an activation is fired and the internal ",Object(c.b)("inlineCode",{parentName:"li"},"workingMemory")," is altered."),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"factRecencyInverse")," - sort activations by the oldest fact first. This is a ",Object(c.b)("inlineCode",{parentName:"li"},"FIFO")," strategy, the earliest fact takes precedence.")),Object(c.b)("p",null,"The default conflict resolution strategy consists of ",Object(c.b)("inlineCode",{parentName:"p"},"salience")," and ",Object(c.b)("inlineCode",{parentName:"p"},"activationRecency"),"."),Object(c.b)("h2",{id:"examples"},"Examples"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Example 1")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"//activation 1\n{\n    salience: 0,\n    activationRecency: 1\n}\n\n//activation 2\n{\n    salience: 0,\n    activationRecency: 2\n}\n\n")),Object(c.b)("p",null,"In the above example activation 2 would be fired since it is the most recent activation and the rule salience is the same."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Example 2")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"//activation 1\n{\n    salience: 1,\n    activationRecency: 1\n}\n\n//activation 2\n{\n    salience: 0,\n    activationRecency: 2\n}\n\n")),Object(c.b)("p",null,"In this example activation 1 would fire because it has a greater salience"),Object(c.b)("h2",{id:"overidding-the-default-strategy"},"Overidding The Default Strategy"),Object(c.b)("p",null,"To override the default strategy you can use the ",Object(c.b)("inlineCode",{parentName:"p"},"conflictResolution")," method on a flow."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'\nvar flow = nools.flow(/**define your flow**/);\n\nflow.conflictResolution(["salience", "factRecency", "activationRecency"]);\n\n')),Object(c.b)("p",null,"The combination of ",Object(c.b)("inlineCode",{parentName:"p"},"salience"),", ",Object(c.b)("inlineCode",{parentName:"p"},"factRecency"),", and ",Object(c.b)("inlineCode",{parentName:"p"},"activationRecency")," would do the following."),Object(c.b)("ol",null,Object(c.b)("li",{parentName:"ol"},"Check if the salience is the same, if not use the activation with the greatest salience."),Object(c.b)("li",{parentName:"ol"},"If salience is the same check if fact recency is the same. The fact recency is determined by looping through the facts in each activation and until two different recencies are found. The activation with the greatest recency takes precendence."),Object(c.b)("li",{parentName:"ol"},"If fact recency is the same check the activation recency.")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Example 1")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"//activation 1\n{\n    salience: 2,\n    factRecency: [1,2,3],\n    activationRecency: 1\n}\n\n//activation 2\n{\n    salience: 1,\n    factRecency: [1,2,4],\n    activationRecency: 2\n}\n")),Object(c.b)("p",null,"In this example activation 1 would fire because it's salience is the greatest."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Example 2")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"//activation 1\n{\n    salience: 1,\n    factRecency: [1,2,3],\n    activationRecency: 1\n}\n\n//activation 2\n{\n    salience: 1,\n    factRecency: [1,2,4],\n    activationRecency: 2\n}\n")),Object(c.b)("p",null,"In Example 2 activation 2 would fire because of the third recency entry."),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"Example 3")),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{}),"//activation 1\n{\n    salience: 2,\n    factRecency: [1,2,3],\n    activationRecency: 1\n}\n\n//activation 2\n{\n    salience: 1,\n    factRecency: [1,2,3],\n    activationRecency: 2\n}\n")),Object(c.b)("p",null,"In Example 3 activation 2 would fire because ",Object(c.b)("inlineCode",{parentName:"p"},"salience")," and ",Object(c.b)("inlineCode",{parentName:"p"},"factRecency")," are the same but activation 2's activation recency is greater."))}b.isMDXComponent=!0},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var a=n(0),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=i.a.createContext({}),b=function(e){var t=i.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=b(e.components);return i.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,c=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=b(n),d=a,f=p["".concat(r,".").concat(d)]||p[d]||u[d]||c;return n?i.a.createElement(f,o(o({ref:t},s),{},{components:n})):i.a.createElement(f,o({ref:t},s))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var c=n.length,r=new Array(c);r[0]=d;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var s=2;s<c;s++)r[s]=n[s];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);